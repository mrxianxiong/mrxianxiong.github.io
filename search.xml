<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>kubeadm 部署k8s</title>
      <link href="2021/03/11/kubernetes/kubernetest/"/>
      <url>2021/03/11/kubernetes/kubernetest/</url>
      
        <content type="html"><![CDATA[<h1><span id="h1">h1</span></h1>]]></content>
      
      
      <categories>
          
          <category> kubernetes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kubernetes </tag>
            
            <tag> kubeadm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>centos7 安装docekr</title>
      <link href="2021/03/05/docker/index/"/>
      <url>2021/03/05/docker/index/</url>
      
        <content type="html"><![CDATA[<!-- toc --><ul><li><a href="#centos7-%E5%AE%89%E8%A3%85docekr">centos7 安装docekr</a></li></ul><!-- tocstop --><h3><span id="centos7-安装docekr">centos7 安装docekr</span></h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">https:&#x2F;&#x2F;docs.docker.com&#x2F;engine&#x2F;install&#x2F;centos&#x2F;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker部署禅道</title>
      <link href="2021/03/05/docker%E9%83%A8%E7%BD%B2%E7%A6%85%E9%81%93/index/"/>
      <url>2021/03/05/docker%E9%83%A8%E7%BD%B2%E7%A6%85%E9%81%93/index/</url>
      
        <content type="html"><![CDATA[<h2><span id="部署禅道">部署禅道</span></h2><h2><span id="一docker形式部署">一：docker形式部署：</span></h2><p><a href="https://www.zentao.net/book/zentaopmshelp/303.html">https://www.zentao.net/book/zentaopmshelp/303.html</a></p><h3><span id="下载docker版源码禅道开源版">下载docker版源码（禅道开源版）</span></h3><p> <a href="http://dl.cnezsoft.com/zentao/docker/docker_zentao.zip">http://dl.cnezsoft.com/zentao/docker/docker_zentao.zip</a>    </p><p> 下载完成解压文件，并上传服务器任意位置</p><p><img src="/assets/zentao/%E4%B8%8A%E4%BC%A0%E8%A7%A3%E5%8E%8B%E6%96%87%E4%BB%B6.jpg"></p><span id="more"></span><p>构建镜像：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker build -t zentao .&#x2F;</span><br></pre></td></tr></table></figure><p>查看构建的镜像</p><p><img src="/assets/zentao/%E6%9F%A5%E7%9C%8Bdocker%E9%95%9C%E5%83%8F.jpg" alt="1581301610665"></p><p>运行镜像：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker run --name [容器名称] -p [主机端口]:80 -v [主机代码目录]:&#x2F;app&#x2F;zentaopms -v [主机数据目录]:&#x2F;var&#x2F;lib&#x2F;mysql -e MYSQL_ROOT_PASSWORD&#x3D;[数据库密码] -d [镜像名]:latest</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">例如</span><br><span class="line">创建 &#x2F;data&#x2F;www &#x2F;data&#x2F;data 目录。</span><br><span class="line">执行命令：</span><br><span class="line">docker run --name zentao -p 1080:80 -v &#x2F;data&#x2F;www:&#x2F;app&#x2F;zentaopms -v &#x2F;data&#x2F;data:&#x2F;var&#x2F;lib&#x2F;mysql -e MYSQL_ROOT_PASSWORD&#x3D;123456 -d zentao:latest</span><br></pre></td></tr></table></figure><p>查看运行情况：</p><p><img src="/assets/zentao/%E6%9F%A5%E7%9C%8Bdocker%E8%BF%90%E8%A1%8C%E9%95%9C%E5%83%8F.jpg" alt="1581301710938"></p><h1><span id="linux部署禅道">linux部署禅道</span></h1><h3><span id="1-官网下载源码">1. 官网下载源码</span></h3><p><img src="/assets/zentao/%E6%BA%90%E4%BB%A3%E7%A0%81.jpg" alt="1581301860658"></p><h3><span id="2-上传到服务器任意位置">2. 上传到服务器任意位置</span></h3><h3><span id="3-将安装包直接解压到opt目录下">3. 将安装包直接解压到/opt目录下</span></h3><p><strong>特别说明：</strong> 不要 解压到别的目录再拷贝到/opt/，因为这样会导致文件的所有者和读写权限改变， 也不要解压后把整个目录777权限 。</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo tar -zxvf  ZenTaoPMS.7.3.stable.zbox_32.tar.gz -C &#x2F;opt</span><br></pre></td></tr></table></figure><h3><span id="4-apache和mysql常用命令">4. Apache和Mysql常用命令</span></h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">执行&#x2F;opt&#x2F;zbox&#x2F;zbox start 命令开启Apache和Mysql。</span><br><span class="line"></span><br><span class="line">执行&#x2F;opt&#x2F;zbox&#x2F;zbox stop 命令停止Apache和Mysql。</span><br><span class="line"></span><br><span class="line">执行&#x2F;opt&#x2F;zbox&#x2F;zbox restart 命令重启Apache和Mysql。</span><br></pre></td></tr></table></figure><p>注：如果需要开机自动启动，可以把 /opt/zbox/zbox restart 加到操作系统的自启目录</p><h3><span id="5-设置apach的端口和mysql的端口">5. 设置apach的端口和mysql的端口</span></h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd &#x2F;opt&#x2F;zbox</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.&#x2F;zbox stop                     #关闭禅道</span><br><span class="line"></span><br><span class="line">.&#x2F;zbox -ap 8082             #更改禅道内置 apache 端口</span><br><span class="line"></span><br><span class="line">.&#x2F;zbox -mp 3307            #更改禅道内置 mysql 端口</span><br><span class="line"></span><br><span class="line">.&#x2F;zbox start                    #启动禅道</span><br></pre></td></tr></table></figure><h3><span id="查看启动">查看启动：</span></h3><p><img src="/assets/zentao/%E5%90%AF%E5%8A%A8%E7%A6%85%E9%81%93.jpg" alt="1581302248726"></p><h3><span id="6-禅道默认登录密码为">6. 禅道默认登录密码为</span></h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">admin</span><br><span class="line">123456</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> 禅道 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>至理名言</title>
      <link href="2021/03/05/%E8%87%B3%E7%90%86%E5%90%8D%E8%A8%80/%E8%87%B3%E7%90%86%E5%90%8D%E8%A8%80/"/>
      <url>2021/03/05/%E8%87%B3%E7%90%86%E5%90%8D%E8%A8%80/%E8%87%B3%E7%90%86%E5%90%8D%E8%A8%80/</url>
      
        <content type="html"><![CDATA[<h4><span id="在没钱的时候把勤舍得出去钱就来了-一一这叫天道酬勤">在没钱的时候，把勤舍得出去，钱就来了。一一这叫天道酬勤。</span></h4><h4><span id="在有钱的时候把钱舍得出去人就来了-一一这叫财散人聚">在有钱的时候，把钱舍得出去，人就来了。一一这叫财散人聚。</span></h4><h4><span id="当有人的时候把爱舍弃出去事业就来了-一一这叫博爱领众">当有人的时候，把爱舍弃出去，事业就来了。一一这叫博爱领众。</span></h4><h4><span id="当事业成功后把智慧舍得出去喜悦就来了-一一这叫德行天下">当事业成功后，把智慧舍得出去，喜悦就来了。一一这叫德行天下。</span></h4><h4><span id="没有舍-就没有得切记世界是圆的你怎么对别人别人就怎么对你">没有舍、就没有得！，切记……世界是圆的，你怎么对别人，别人就怎么对你…</span></h4>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>docker-compose</title>
      <link href="2021/03/05/docker/docker-compose/"/>
      <url>2021/03/05/docker/docker-compose/</url>
      
        <content type="html"><![CDATA[<!-- toc --><ul><li><a href="#centos7-%E5%AE%89%E8%A3%85docekr">centos7 安装docekr</a></li></ul><!-- tocstop --><h3><span id="centos7-安装docekr">centos7 安装docekr</span></h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">https:&#x2F;&#x2F;docs.docker.com&#x2F;engine&#x2F;install&#x2F;centos&#x2F;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OenResource</title>
      <link href="2021/03/04/openResource/OpenResource/"/>
      <url>2021/03/04/openResource/OpenResource/</url>
      
        <content type="html"><![CDATA[<h2><span id="资料记载">资料记载：</span></h2><!-- toc --><ul><li><a href="#%E4%B8%80%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE%E6%A1%86%E6%9E%B6scaspring-securityskywalkingelkdocker">一：开源项目框架：（sca+spring security+skywalking+elk+docker）</a></li><li><a href="#%E4%BA%8Cspringboot-%E4%B8%89%E7%A7%8D%E5%85%A8%E5%B1%80%E6%97%B6%E9%97%B4%E6%A0%BC%E5%BC%8F%E9%85%8D%E7%BD%AE">二：springboot 三种全局时间格式配置：</a></li><li><a href="#%E4%B8%89-kubernetes">三、kubernetes:</a></li><li><a href="#%E5%9B%9Bidea%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95">四：idea远程调试：</a></li><li><a href="#%E4%BA%94centos7">五：centos7</a></li></ul><!-- tocstop --><hr><h3><span id="一开源项目框架scaspring-securityskywalkingelkdocker">一：开源项目框架：（sca+spring security+skywalking+elk+docker）</span></h3><h4><span id="1-演示环境有全方位的监控示例日志系统-apm系统-gpe系统">1. 演示环境有全方位的监控示例：日志系统 + APM系统 + GPE系统</span></h4><h4><span id="2-document-httpswwwkancloudcnzlt2000microservices-platform919414">2. document: </span></h4><h4><span id="3-gitee-httpsgiteecomzlt2000microservices-platform">3. gitee: </span></h4><h4><span id="4-演示环境httpzlt2000cnloginhtml">4. 演示环境：</span></h4><hr><span id="more"></span><h3><span id="二springboot-三种全局时间格式配置">二：springboot 三种全局时间格式配置：</span></h3><h4><span id="1-全局时间格式配置httpswwwoschinanetgroupskilldetail2358447">1. 全局时间格式配置：（</span></h4><h5><span id="1-目前项目中需要设置时间格式的方法">1. 目前项目中需要设置时间格式的方法</span></h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SimpleDateFormat dateFormat &#x3D; new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span><br><span class="line">Date stationTime &#x3D; dateFormat.parse(dateFormat.format(PayEndTime()));</span><br></pre></td></tr></table></figure><h5><span id="2-jsonformat-注解注解方式严格意义上不能叫全局时间格式化应该叫部分格式化因为jsonformat-注解需要用在实体类的时间字段上而只有使用相应的实体类对应的字段才能进行格式化">2. @JsonFormat 注解(注解方式严格意义上不能叫全局时间格式化，应该叫部分格式化，因为<code>@JsonFormat</code> 注解需要用在实体类的时间字段上，而只有使用相应的实体类，对应的字段才能进行格式化。)</span></h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@Data</span><br><span class="line">public class OrderDTO &#123;</span><br><span class="line"></span><br><span class="line">    @JsonFormat(locale &#x3D; &quot;zh&quot;, timezone &#x3D; &quot;GMT+8&quot;, pattern &#x3D; &quot;yyyy-MM-dd&quot;)</span><br><span class="line">    private LocalDateTime createTime;</span><br><span class="line"></span><br><span class="line">    @JsonFormat(locale &#x3D; &quot;zh&quot;, timezone &#x3D; &quot;GMT+8&quot;, pattern &#x3D; &quot;yyyy-MM-dd HH:mm:ss&quot;)</span><br><span class="line">    private Date updateTime;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5><span id="3-jsoncomponent-注解推荐">3. @JsonComponent 注解（<strong>推荐</strong>）</span></h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@JsonComponent</span><br><span class="line">public class DateFormatConfig &#123;</span><br><span class="line"></span><br><span class="line">    @Value(&quot;$&#123;spring.jackson.date-format:yyyy-MM-dd HH:mm:ss&#125;&quot;)</span><br><span class="line">    private String pattern;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * @author xiaofu</span><br><span class="line">     * @description date 类型全局时间格式化</span><br><span class="line">     * @date 2020&#x2F;8&#x2F;31 18:22</span><br><span class="line">     *&#x2F;</span><br><span class="line">    @Bean</span><br><span class="line">    public Jackson2ObjectMapperBuilderCustomizer jackson2ObjectMapperBuilder() &#123;</span><br><span class="line"></span><br><span class="line">        return builder -&gt; &#123;</span><br><span class="line">            TimeZone tz &#x3D; TimeZone.getTimeZone(&quot;UTC&quot;);</span><br><span class="line">            DateFormat df &#x3D; new SimpleDateFormat(pattern);</span><br><span class="line">            df.setTimeZone(tz);</span><br><span class="line">            builder.failOnEmptyBeans(false)</span><br><span class="line">                    .failOnUnknownProperties(false)</span><br><span class="line">                    .featuresToDisable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS)</span><br><span class="line">                    .dateFormat(df);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * @author xiaofu</span><br><span class="line">     * @description LocalDate 类型全局时间格式化</span><br><span class="line">     * @date 2020&#x2F;8&#x2F;31 18:22</span><br><span class="line">     *&#x2F;</span><br><span class="line">    @Bean</span><br><span class="line">    public LocalDateTimeSerializer localDateTimeDeserializer() &#123;</span><br><span class="line">        return new LocalDateTimeSerializer(DateTimeFormatter.ofPattern(pattern));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Bean</span><br><span class="line">    public Jackson2ObjectMapperBuilderCustomizer jackson2ObjectMapperBuilderCustomizer() &#123;</span><br><span class="line">        return builder -&gt; builder.serializerByType(LocalDateTime.class, localDateTimeDeserializer());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4><span id="2-自定义时间格式实际开发中如果我有个字段不想用全局格式化设置的时间样式想自定义格式怎么办那就需要和-jsonformat-注解配合使用了">2. 自定义时间格式：(实际开发中如果我有个字段不想用全局格式化设置的时间样式，想自定义格式怎么办？那就需要和 <code>@JsonFormat</code> 注解配合使用了。)</span></h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@Data</span><br><span class="line">public class OrderDTO &#123;</span><br><span class="line"></span><br><span class="line">    @JsonFormat(locale &#x3D; &quot;zh&quot;, timezone &#x3D; &quot;GMT+8&quot;, pattern &#x3D; &quot;yyyy-MM-dd&quot;)</span><br><span class="line">    private LocalDateTime createTime;</span><br><span class="line"></span><br><span class="line">    @JsonFormat(locale &#x3D; &quot;zh&quot;, timezone &#x3D; &quot;GMT+8&quot;, pattern &#x3D; &quot;yyyy-MM-dd&quot;)</span><br><span class="line">    private Date updateTime;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4><span id="jsonformat-注解的优先级比较高会以-jsonformat-注解的时间格式为主">*** <code>@JsonFormat</code> 注解的优先级比较高，会以 <code>@JsonFormat</code> 注解的时间格式为主。</span></h4><hr><h3><span id="三-kubernetes">三、kubernetes:</span></h3><h4><span id="基础知识文档httpskubernetesiozhdocsconceptsarchitecturenodes">基础知识文档：</span></h4><h4><span id="老男孩部署kubernetes教程httpswwwyuquecomgrepkubernetescdiy10">老男孩部署kubernetes教程：</span></h4><hr><h3><span id="四idea远程调试">四：idea远程调试：</span></h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">java -Xdebug -Xrunjdwp:transport&#x3D;dt_socket,address&#x3D;10102,server&#x3D;y,suspend&#x3D;y -jar epanda-gateway-service-1.0.6-SNAPSHOT.jar</span><br></pre></td></tr></table></figure><hr><h3><span id="五centos7">五：centos7</span></h3><h4><span id="1-解决服务器cpu飙升问题排查步骤">1、解决服务器CPU飙升问题排查步骤：</span></h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">https:&#x2F;&#x2F;mp.weixin.qq.com&#x2F;s&#x2F;K1soxilMPh1ce___oMCS9Q</span><br></pre></td></tr></table></figure><p>1、查看当前服务器的网路连接信息：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">netstat -napt</span><br></pre></td></tr></table></figure><h4><span id="2-centos7-部署minio文件服务器单机版">2、centos7 部署minio文件服务器（单机版）</span></h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. </span><br><span class="line">https:&#x2F;&#x2F;www.jianshu.com&#x2F;p&#x2F;0fe7da610899?utm_campaign&#x3D;maleskine&amp;utm_content&#x3D;note&amp;utm_medium&#x3D;seo_notes&amp;utm_source&#x3D;recommendation</span><br><span class="line"></span><br><span class="line">2.</span><br><span class="line">https:&#x2F;&#x2F;www.it610.com&#x2F;article&#x2F;1294631348035723264.htm</span><br></pre></td></tr></table></figure><h5><span id="部署步骤">部署步骤：</span></h5><p>1、创建minio安装相关文件夹</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkdir &#x2F;usr&#x2F;local&#x2F;minio</span><br><span class="line">mkdir &#x2F;usr&#x2F;local&#x2F;minio&#x2F;bin</span><br><span class="line">mkdir &#x2F;usr&#x2F;local&#x2F;minio&#x2F;etc</span><br><span class="line">mkdir &#x2F;usr&#x2F;local&#x2F;minio&#x2F;data</span><br></pre></td></tr></table></figure><p>2、下载二进制文件</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd &#x2F;usr&#x2F;local&#x2F;minio&#x2F;bin</span><br><span class="line"></span><br><span class="line">wget https:&#x2F;&#x2F;dl.minio.io&#x2F;server&#x2F;minio&#x2F;release&#x2F;linux-amd64&#x2F;minio</span><br><span class="line"></span><br><span class="line">chmod +x minio </span><br></pre></td></tr></table></figure><p>3、创建minio配置文件</p><ol><li>配置登录用户名及密码</li><li>myip为内网地址，公网地址不得行</li></ol><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd &#x2F;usr&#x2F;local&#x2F;minio&#x2F;etc&#x2F;</span><br><span class="line"></span><br><span class="line">touch minio.conf</span><br><span class="line"></span><br><span class="line">#minio.conf文件内填写</span><br><span class="line">MINIO_VOLUMES&#x3D;&quot;&#x2F;usr&#x2F;local&#x2F;minio&#x2F;data&quot;</span><br><span class="line">MINIO_OPTS&#x3D;&quot;-C &#x2F;usr&#x2F;local&#x2F;minio&#x2F;etc --address myip:9000&quot;</span><br><span class="line">MINIO_ACCESS_KEY&#x3D;&quot;TEST&quot;</span><br><span class="line">MINIO_SECRET_KEY&#x3D;&quot;12345678&quot;</span><br></pre></td></tr></table></figure><p>4、创建服务配置文件</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;</span><br><span class="line"></span><br><span class="line">touch minio.service</span><br><span class="line"></span><br><span class="line">#minio.service文件内填写</span><br><span class="line">[Unit]</span><br><span class="line">Description&#x3D;MinIO</span><br><span class="line">Documentation&#x3D;https:&#x2F;&#x2F;docs.min.io</span><br><span class="line">Wants&#x3D;network-online.target</span><br><span class="line">After&#x3D;network-online.target</span><br><span class="line">AssertFileIsExecutable&#x3D;&#x2F;usr&#x2F;local&#x2F;minio&#x2F;bin&#x2F;minio</span><br><span class="line">[Service]</span><br><span class="line"># User and group</span><br><span class="line">User&#x3D;minio</span><br><span class="line">Group&#x3D;minio</span><br><span class="line">EnvironmentFile&#x3D;&#x2F;usr&#x2F;local&#x2F;minio&#x2F;etc&#x2F;minio.conf</span><br><span class="line">ExecStart&#x3D;&#x2F;usr&#x2F;local&#x2F;minio&#x2F;bin&#x2F;minio server $MINIO_OPTS $MINIO_VOLUMES</span><br><span class="line"># Let systemd restart this service always</span><br><span class="line">Restart&#x3D;always</span><br><span class="line"># Specifies the maximum file descriptor number that can be opened by this process</span><br><span class="line">LimitNOFILE&#x3D;65536</span><br><span class="line"># Disable timeout logic and wait until process is stopped</span><br><span class="line">TimeoutStopSec&#x3D;infinity</span><br><span class="line">SendSIGKILL&#x3D;no</span><br><span class="line">[Install]</span><br><span class="line">WantedBy&#x3D;multi-user.target</span><br></pre></td></tr></table></figure><p>5、启动minio服务(默认登录名及密码：minioadmin/minioadmin)</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#  systemctl daemon-reload</span><br><span class="line"></span><br><span class="line">#  systemctl enable minio.service</span><br><span class="line"></span><br><span class="line">#  systemctl start  minio.service</span><br><span class="line"></span><br><span class="line">#  systemctl status  minio.service</span><br></pre></td></tr></table></figure><p>6、配置SSL/TLS</p><ol><li>生成公钥私钥</li></ol><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">openssl req -x509 -nodes -sha512 -newkey rsa:2048 -day 365 -sub &quot;&#x2F;C&#x3D;CN&#x2F;ST&#x3D;Gunagdong&#x2F;L&#x3D;Shenzhen&#x2F;O&#x3D;Test&#x2F;OU&#x3D;Test&#x2F;CN&#x3D;www.example.com&quot; -keyout private.key</span><br></pre></td></tr></table></figure><ol start="2"><li>移动公钥私钥到minio安装文件夹（etc目录中）<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mv private.key &#x2F;usr&#x2F;local&#x2F;minio&#x2F;etc&#x2F;certs</span><br><span class="line">mv public.crt &#x2F;usr&#x2F;local&#x2F;minio&#x2F;etc&#x2F;certs</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li>重启minio server<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">systemctl resatrt minio.service</span><br></pre></td></tr></table></figure></li></ol><h4><span id="3-centos7-查看systemctl启动服务日志">3、centos7 查看systemctl启动服务日志</span></h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">journalctl -u &quot;minio.service&quot;(服务名)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
      </categories>
      
      
        <tags>
            
            <tag> note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CFSSL证书生成</title>
      <link href="2021/03/04/ssl/cfssl/"/>
      <url>2021/03/04/ssl/cfssl/</url>
      
        <content type="html"><![CDATA[<h2><span id="ssl证书生成">SSL证书生成：</span></h2><!-- toc --><ul><li><a href="#%E4%B8%80-cfssl%E6%96%B9%E5%BC%8F%E7%94%9F%E6%88%90%E8%AF%81%E4%B9%A6">一、CFSSL方式生成证书：</a></li><li><a href="#%E4%BA%8C-openssl%E6%96%B9%E5%BC%8F%E7%94%9F%E6%88%90%E8%AF%81%E4%B9%A6">二、OpenSSL方式生成证书：</a></li></ul><!-- tocstop --><h3><span id="一-cfssl方式生成证书">一、CFSSL方式生成证书：</span></h3><p><a href="https://github.com/openssl/openssl#download">github地址：</a></p><h4><span id="11-linux安装cfssl前4步必须执行">1.1、linux安装cfssl：（前4步必须执行）</span></h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1、curl -s -L -o &#x2F;bin&#x2F;cfssl https:&#x2F;&#x2F;pkg.cfssl.org&#x2F;R1.2&#x2F;cfssl_linux-amd64</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">2、curl -s -L -o &#x2F;bin&#x2F;cfssl-json https:&#x2F;&#x2F;pkg.cfssl.org&#x2F;R1.2&#x2F;cfssljson_linux-amd64</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">3、curl -s -L -o &#x2F;bin&#x2F;cfssl-certinfo https:&#x2F;&#x2F;pkg.cfssl.org&#x2F;R1.2&#x2F;cfssl-certinfo_linux-amd64</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">赋予执行权限：</span><br><span class="line">4、chmod +x &#x2F;bin&#x2F;cfssl*</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">查看位置：</span><br><span class="line">which cfssl</span><br><span class="line">which cfssljson</span><br><span class="line">which cfssl-certinfo</span><br></pre></td></tr></table></figure><span id="more"></span><h4><span id="12-创建生成ca证书签名请求ca-csrjson">1.2、创建生成CA证书签名请求（ca-csr.json）</span></h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1、cd &#x2F;opt&#x2F;certs</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">2、vim ca-csr.json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">&quot;CN&quot;: &quot;kubernetes&quot;,</span><br><span class="line">&quot;hosts&quot;:[],</span><br><span class="line">&quot;key&quot;: &#123;</span><br><span class="line">    &quot;algo&quot;: &quot;rsa&quot;,</span><br><span class="line">    &quot;size&quot;: 2048</span><br><span class="line">&#125;,</span><br><span class="line">&quot;names&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;C&quot;: &quot;CN&quot;,</span><br><span class="line">        &quot;L&quot;: &quot;BeiJing&quot;,</span><br><span class="line">        &quot;O&quot;: &quot;Ctyun&quot;,</span><br><span class="line">        &quot;ST&quot;: &quot;BeiJing&quot;,            </span><br><span class="line">        &quot;OU&quot;: &quot;ops&quot;</span><br><span class="line">    &#125;    </span><br><span class="line">    ],</span><br><span class="line">    &quot;ca&quot;:&#123;</span><br><span class="line">    &quot;expiry&quot;:&quot;175200h&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">CN：Common Name，浏览器使用该字段验证网站是否合法，一般写的是域名，非常重要。（签发机构）</span><br><span class="line">C：Country，国家</span><br><span class="line">ST：State，州，省</span><br><span class="line">L：Locality，地区，城市</span><br><span class="line">O：Organization Name，组织名称，公司名称</span><br><span class="line">OU：Organization Unit Name：组织单位名称，公司部门</span><br><span class="line"></span><br><span class="line">expiry：过期时间</span><br></pre></td></tr></table></figure><h4><span id="13-生成根证书">1.3、生成根证书</span></h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1、cd &#x2F;opt&#x2F;certs</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">2、cfssl gencertscfssl gencert -initca ca-csr.json | cfssl-json -bare ca</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/qq_1782800572/images-bed/raw/master/CFSSL/20210304104031.png" alt="生成证书"></p><h3><span id="二-openssl方式生成证书">二、OpenSSL方式生成证书：</span></h3>]]></content>
      
      
      <categories>
          
          <category> ssl </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 证书 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
